# Phase 1 æŠ€æœ¯æ¶æ„è®¾è®¡

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **æç®€ä¸»ä¹‰** - æ¯ä¸ªç»„ä»¶éƒ½æ˜¯å¿…éœ€çš„ï¼Œæ²¡æœ‰å†—ä½™
2. **å•ä½“ä¼˜å…ˆ** - é¿å…åˆ†å¸ƒå¼å¤æ‚æ€§
3. **æ‰¹å¤„ç†æ€ç»´** - ç¦»çº¿å¤„ç†ï¼Œåœ¨çº¿æŸ¥è¯¢
4. **æ¸è¿›å¢å¼º** - å¯ä»¥è½»æ¾å‡çº§ä½†ä¸è¿‡åº¦è®¾è®¡

## ğŸ— ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢å±‚                        â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Web UI      â”‚        â”‚  CLI Tool            â”‚   â”‚
â”‚  â”‚ (Streamlit-  â”‚        â”‚ (process_dataset.py  â”‚   â”‚
â”‚  â”‚  æµè§ˆ/æœç´¢)  â”‚        â”‚  æ‰¹å¤„ç†è„šæœ¬)        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                           â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APIæœåŠ¡å±‚                          â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           FastAPI Application               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚    â”‚
â”‚  â”‚  â”‚ æœç´¢API â”‚  â”‚ æµè§ˆAPI  â”‚                  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¤„ç†å¼•æ“å±‚                          â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å›¾åƒè¯†åˆ«å¼•æ“ â”‚  â”‚  OCRå¼•æ“     â”‚  â”‚ æ‰¹å¤„ç†å™¨   â”‚  â”‚
â”‚  â”‚ (RTMDet/CLIP)â”‚  â”‚ (PaddleOCR)  â”‚  â”‚ (CLIé©±åŠ¨)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                          â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              SQLiteæ•°æ®åº“                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ å›¾ç‰‡å…ƒæ•°æ®â”‚  â”‚ è¯†åˆ«ç»“æœ â”‚  â”‚  OCRæ–‡æœ¬  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ                     â”‚    â”‚
â”‚  â”‚    åŸå§‹å›¾ç‰‡ / ç¼©ç•¥å›¾ / å¤„ç†ç¼“å­˜              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Web UI (Streamlit)**ï¼šæä¾›æœç´¢ä¸å¤„ç†çŠ¶æ€è§†å›¾ï¼Œä»…é€šè¿‡FastAPIè¯»å–æ•°æ®ï¼Œä¸è´Ÿè´£å¯¼å…¥ã€‚
- **CLI Tool (`process_dataset.py`)**ï¼šæ‰§è¡Œæ‰€æœ‰æ‰¹å¤„ç†å¯¼å…¥ä»»åŠ¡ï¼Œç›´æ¥è°ƒç”¨å¤„ç†å¼•æ“å¹¶å†™å…¥æ•°æ®åº“/ç¼“å­˜ï¼Œä¸é€šè¿‡FastAPIæš´éœ²çš„æ¥å£ã€‚

## ğŸ“¦ æŠ€æœ¯æ ˆé€‰æ‹©

### æ ¸å¿ƒä¾èµ–ï¼ˆå¿…éœ€ï¼‰
```python
# requirements.txt - 2024å¹´11æœˆæœ€æ–°ç¨³å®šç‰ˆæœ¬
fastapi==0.121.1           # APIæ¡†æ¶ (æœ€æ–°ç‰ˆæœ¬)
uvicorn==0.38.0            # ASGIæœåŠ¡å™¨ (æœ€æ–°ç‰ˆæœ¬)
streamlit==1.51.0          # å¿«é€ŸWeb UI
sqlalchemy==2.0.44         # ORM
sqlite3                    # å†…ç½®æ•°æ®åº“
pillow==12.0.0             # å›¾åƒå¤„ç†
python-multipart==0.0.20   # æ–‡ä»¶ä¸Šä¼ æ”¯æŒ
aiofiles==25.1.0           # å¼‚æ­¥æ–‡ä»¶æ“ä½œ
pydantic==2.12.4           # æ•°æ®éªŒè¯
```

### è¿è¡Œç¯å¢ƒå‡è®¾

- **å¼€å‘ç¯å¢ƒ**ï¼šmacOSï¼ŒApple M4 Maxï¼ˆå……è¶³CPU/GPUæ ¸ä¸å†…å­˜ï¼‰ï¼Œæœ¬åœ°æ‰§è¡Œæ‰¹å¤„ç†ä¸åŠŸèƒ½å¼€å‘ã€‚
- **æµ‹è¯•ç¯å¢ƒ**ï¼šé«˜ç«¯PCï¼ŒNVIDIA GeForce 5090 GPUï¼ˆç”¨äºéªŒè¯RTMDet / PaddleOCRæ¨ç†è¡¨ç°ï¼‰ã€‚
- **å­˜å‚¨å‰æ**ï¼šç”±ç»´æŠ¤è€…æä¾›è¶³å¤Ÿçš„æœ¬åœ°ç£ç›˜å®¹é‡ï¼Œæ— éœ€è§„åˆ’äº‘ç«¯èµ„æºã€‚
- **éƒ¨ç½²ç›®æ ‡**ï¼šå•æœºç¦»çº¿éƒ¨ç½²ï¼Œä¸æ¶‰åŠäº‘ç«¯æˆ–åˆ†å¸ƒå¼éƒ¨ç½²æ–¹æ¡ˆã€‚

### è¯†åˆ«å¼•æ“
```python
# ä¸»æ–¹æ¡ˆï¼šRTMDet (æ¨èä½¿ç”¨)
torch==2.9.0              # PyTorch (æœ€æ–°ç‰ˆæœ¬)
torchvision==0.24.0       # TorchVision (æœ€æ–°ç‰ˆæœ¬)
mmdet==3.3.0              # MMDetectionæ¡†æ¶
mmengine==0.10.7          # MMEngineåŸºç¡€åº“
mmcv==2.2.0               # MMCVåŸºç¡€åº“

# å¤‡é€‰æ–¹æ¡ˆï¼šCLIP (æ›´è½»é‡ï¼Œå¯é€‰å®‰è£…)
# transformers==4.57.1    # Hugging Face
# clip-interrogator==0.6.0  # CLIPå·¥å…·
```

### OCRå¼•æ“
```python
paddlepaddle==3.2.0       # PaddlePaddleæ¡†æ¶æœ€æ–°ç¨³å®šç‰ˆ
paddleocr==3.3.1          # PaddleOCRæœ€æ–°ç¨³å®šç‰ˆ
```

## ğŸ—„ æ•°æ®åº“è®¾è®¡

### ç®€åŒ–çš„è¡¨ç»“æ„ï¼ˆæ”¯æŒæœªæ¥æ‰©å±•ï¼‰
```sql
-- å›¾ç‰‡ä¸»è¡¨
CREATE TABLE images (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    filename TEXT NOT NULL,
    original_path TEXT NOT NULL,      -- åŸå§‹å›¾ç‰‡è·¯å¾„
    processed_path TEXT,               -- å½’ä¸€åŒ–åçš„å›¾ç‰‡è·¯å¾„
    thumbnail_path TEXT,               -- ç¼©ç•¥å›¾è·¯å¾„
    phash TEXT UNIQUE,                 -- æ„ŸçŸ¥å“ˆå¸Œï¼ˆç”¨äºå»é‡ï¼‰
    file_size INTEGER,
    width INTEGER,
    height INTEGER,
    format TEXT,
    import_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    process_status TEXT DEFAULT 'pending',  -- pending/processing/completed/failed/duplicate
    process_time FLOAT,
    error_message TEXT,                -- é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœå¤±è´¥ï¼‰
    
    -- ğŸ”„ é¢„ç•™å­—æ®µï¼ˆPhase 2å‡†å¤‡ï¼‰
    embedding_json TEXT,  -- å­˜å‚¨å‘é‡åµŒå…¥ï¼ˆJSONæ ¼å¼ï¼‰
    caption TEXT         -- å­˜å‚¨å›¾åƒæè¿°ï¼ˆæœªæ¥æ‰©å±•ï¼‰
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_phash ON images(phash);  -- å¿«é€Ÿå»é‡æŸ¥è¯¢
CREATE INDEX idx_status ON images(process_status);  -- çŠ¶æ€æŸ¥è¯¢
CREATE INDEX idx_import_time ON images(import_time);  -- æ—¶é—´æ’åº

-- æ£€æµ‹ç»“æœè¡¨
CREATE TABLE detections (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    image_id INTEGER NOT NULL,
    object_class TEXT NOT NULL,      -- æ£€æµ‹åˆ°çš„ç‰©ä½“ç±»åˆ«
    confidence FLOAT NOT NULL,
    bbox_x1 FLOAT,
    bbox_y1 FLOAT,
    bbox_x2 FLOAT,
    bbox_y2 FLOAT,
    FOREIGN KEY (image_id) REFERENCES images(id)
);

-- OCRç»“æœè¡¨
CREATE TABLE ocr_results (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    image_id INTEGER NOT NULL,
    text_content TEXT,
    confidence FLOAT,
    language TEXT,
    FOREIGN KEY (image_id) REFERENCES images(id)
);

-- æœç´¢ç´¢å¼•è¡¨ï¼ˆæ”¯æŒå…¨æ–‡æœç´¢ï¼‰
CREATE VIRTUAL TABLE search_index USING fts5(
    image_id,
    content,  -- åˆå¹¶çš„å¯æœç´¢æ–‡æœ¬
    tokenize = 'porter unicode61'  -- æ›´å¥½çš„åˆ†è¯æ”¯æŒ
);

-- ğŸ”„ å‘é‡ç´¢å¼•è¡¨ï¼ˆPhase 2å‡†å¤‡ï¼Œæš‚ä¸æ¿€æ´»ï¼‰
-- CREATE TABLE vector_index (
--     id INTEGER PRIMARY KEY,
--     image_id INTEGER NOT NULL,
--     embedding BLOB,  -- äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨å‘é‡
--     FOREIGN KEY (image_id) REFERENCES images(id)
-- );
```

## ğŸ”„ å¤„ç†æµç¨‹

### æ‰¹å¤„ç†æµç¨‹ï¼ˆå¸¦ç¼“å­˜ä¼˜åŒ–ï¼‰
```python
async def batch_process_images(dataset_dir: str = 'samples'):
    """
    ç¦»çº¿æ‰¹å¤„ç†ä¸»æµç¨‹ï¼ˆåªè¯»æºæ•°æ®ï¼Œç¼“å­˜ç»“æœï¼‰
    """
    # 1. æ‰«æåªè¯»æ•°æ®é›†
    images = scan_folder(dataset_dir, readonly=True)
    for image_path in images:
        db.add_image(image_path, status='pending')
    
    # 2. æ‰¹é‡å¤„ç†ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
    batch_size = 10
    for batch in chunks(images, batch_size):
        for image_path in batch:
            # è®¡ç®—æ„ŸçŸ¥å“ˆå¸Œï¼ˆç¼“å­˜é”®ï¼‰
            phash = compute_phash(image_path)
            
            # 2.1 ç”Ÿæˆç¼©ç•¥å›¾ï¼ˆcache/images/thumbnails/ï¼‰
            create_or_load_thumbnail(image_path, phash)
            
            # 2.2 ç‰©ä½“æ£€æµ‹ï¼ˆcache/detections/ï¼‰
            detections = get_or_compute_detections(image_path, phash)
            db.save_detections(detections)
            
            # 2.3 OCRæå–ï¼ˆcache/ocr/ï¼‰
            if has_text_content(image_path):
                ocr_results = get_or_compute_ocr(image_path, phash)
                db.save_ocr_results(ocr_results)
            
            # 2.4 æ›´æ–°æœç´¢ç´¢å¼•ï¼ˆdata/vibe_photos.dbï¼‰
            update_search_index(image_path)
            
            # 2.5 æ ‡è®°å®Œæˆ
            db.update_status(image_path, 'completed')
```

### æœç´¢æµç¨‹
```python
def search_images(query: str, filters: dict = None):
    """
    å¿«é€Ÿæ£€ç´¢æµç¨‹
    """
    # 1. å…¨æ–‡æœç´¢
    text_matches = db.search_fulltext(query)
    
    # 2. ç±»åˆ«è¿‡æ»¤ï¼ˆå¦‚æœæŒ‡å®šï¼‰
    if filters.get('category'):
        text_matches = filter_by_category(text_matches, filters['category'])
    
    # 3. ç½®ä¿¡åº¦è¿‡æ»¤
    if filters.get('min_confidence'):
        text_matches = filter_by_confidence(text_matches, filters['min_confidence'])
    
    # 4. è¿”å›ç»“æœ
    return {
        'results': text_matches,
        'total': len(text_matches),
        'query_time': measure_time()
    }
```

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### å¼€å‘ç¯å¢ƒ
```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆä½¿ç”¨ uvï¼‰
uv venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# 2. åŒæ­¥ä¾èµ–ï¼ˆä½¿ç”¨ uvï¼‰
uv pip sync requirements.txt

# 3. åˆå§‹åŒ–æ•°æ®åº“
uv run python scripts/init_db.py

# 4. å¯åŠ¨APIæœåŠ¡
uv run uvicorn app.main:app --reload

# 5. å¯åŠ¨Web UIï¼ˆæ–°ç»ˆç«¯ï¼‰
uv run streamlit run ui/app.py
```

### ç›®å½•ç»“æ„
```
phase1/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py              # FastAPIä¸»åº”ç”¨
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ database.py          # æ•°æ®åº“è¿æ¥
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ search.py        # æœç´¢API
â”‚       â””â”€â”€ browse.py        # æµè§ˆAPI
â”œâ”€â”€ processors/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ detector.py          # ç‰©ä½“æ£€æµ‹
â”‚   â”œâ”€â”€ ocr.py              # OCRå¤„ç†
â”‚   â””â”€â”€ batch.py            # æ‰¹å¤„ç†å™¨
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ app.py              # Streamlitåº”ç”¨
â”‚   â””â”€â”€ components/         # UIç»„ä»¶
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ init_db.py          # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ process_dataset.py      # CLIæ‰¹å¤„ç†è„šæœ¬
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_*.py           # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ images/             # åŸå§‹å›¾ç‰‡
â”‚   â”œâ”€â”€ thumbnails/         # ç¼©ç•¥å›¾
â”‚   â””â”€â”€ cache/             # å¤„ç†ç¼“å­˜
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸ¯ æ€§èƒ½ç›®æ ‡ï¼ˆéå¼ºåˆ¶ï¼‰

- **æ‰¹å¤„ç†é€Ÿåº¦**: 10-20å¼ /åˆ†é’Ÿï¼ˆCPUï¼‰
- **æœç´¢å“åº”**: < 1ç§’ï¼ˆ1ä¸‡å¼ å›¾ç‰‡ï¼‰
- **å†…å­˜å ç”¨**: < 2GB
- **å­˜å‚¨å ç”¨**: åŸå›¾ + 20%ï¼ˆç¼©ç•¥å›¾å’Œå…ƒæ•°æ®ï¼‰

## âš™ï¸ é…ç½®ç¤ºä¾‹

```python
# config.py
class Settings:
    # æ•°æ®åº“
    DATABASE_URL = "sqlite:///./phase1.db"
    
    # æ‰¹å¤„ç†
    BATCH_SIZE = 100  # é€‚é…å¤§æ–‡ä»¶ï¼Œæ¯æ‰¹100å¼ 
    MAX_WORKERS = 8   # å……åˆ†åˆ©ç”¨å¤šæ ¸CPU
    CHECKPOINT_INTERVAL = 500  # æ¯500å¼ ä¿å­˜è¿›åº¦
    
    # å›¾åƒå¤„ç†
    THUMBNAIL_SIZE = (512, 512)  # å¢åŠ ç¼©ç•¥å›¾è´¨é‡
    THUMBNAIL_QUALITY = 85  # å‹ç¼©è´¨é‡
    MAX_IMAGE_SIZE = 60 * 1024 * 1024  # 60MBä¸Šé™
    SUPPORTED_FORMATS = ['.jpg', '.jpeg', '.png', '.webp', '.heic']
    USE_WEBP = True  # ç¼©ç•¥å›¾ä½¿ç”¨WebPæ ¼å¼èŠ‚çœç©ºé—´
    
    # æ£€æµ‹å¼•æ“
    DETECTION_MODEL = "rtmdet-l"  # RTMDet-L (52.8% mAP, Apache-2.0è®¸å¯)
    # DETECTION_MODEL = "clip-base"  # å¤‡é€‰æ–¹æ¡ˆ
    CONFIDENCE_THRESHOLD = 0.3
    
    # OCR
    OCR_LANGS = ['ch', 'en']
    
    # æœç´¢
    SEARCH_LIMIT = 50
    
    # å­˜å‚¨è·¯å¾„ï¼ˆåˆ†ç¦»æºæ•°æ®ã€ç¼“å­˜å’Œæ•°æ®åº“ï¼‰
    DATASET_PATH = "samples"  # åªè¯»æºæ•°æ®
    THUMBNAIL_PATH = "cache/images/thumbnails"  # å¯å¤ç”¨ç¼“å­˜
    PROCESSED_PATH = "cache/images/processed"  # å½’ä¸€åŒ–å›¾ç‰‡
    DETECTION_CACHE = "cache/detections"  # æ£€æµ‹ç»“æœç¼“å­˜
    OCR_CACHE = "cache/ocr"  # OCRç»“æœç¼“å­˜
    DATABASE_PATH = "data/vibe_photos.db"  # æ•°æ®åº“
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ä¸è¿½æ±‚å®æ—¶æ€§** - æ‰¹å¤„ç†ä¼˜å…ˆï¼Œç”¨æˆ·å¯ä»¥ç­‰å¾…
2. **ä¸è¿‡åº¦ä¼˜åŒ–** - ä»£ç æ¸…æ™°æ¯”æ€§èƒ½é‡è¦
3. **ä¸å¤„ç†è¾¹ç¼˜æƒ…å†µ** - ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
4. **ä¸è€ƒè™‘æ‰©å±•æ€§** - å•æœºå•ç”¨æˆ·å³å¯
5. **ä¿æŒç®€å•** - å¦‚æœä¸€ä¸ªåŠŸèƒ½éœ€è¦å¤æ‚å®ç°ï¼Œè€ƒè™‘ç æ‰

## ä¸‹ä¸€æ­¥

â†’ æŸ¥çœ‹[å®æ–½è®¡åˆ’](implementation.md)äº†è§£å…·ä½“å¼€å‘æ­¥éª¤
